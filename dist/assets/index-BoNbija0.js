import{r as l,j as e,B as w,i as h}from"./index-CkkKPyuP.js";import{d as N,T as g,a as t,C as b,b as D,c as C,e as y,f as r,g as T,h as A,P as U}from"./pagination-CzlqMKQ0.js";import{g as _,h as P,i as S,j as M}from"./index-C-92eTuZ.js";import{E as v,A as E,a as F,b as H,c as R,d as k,e as B,f as L,g as O}from"./alert-dialog-CdkxFdne.js";import{f as z}from"./format-cwXK75ha.js";import"./index-BpDdPLnr.js";function W({userId:s,onDeleted:n}){const[a,i]=l.useState(!1),[d,c]=l.useState(!1),x=async()=>{i(!0);try{await N(s),n(s),h.success("User deleted"),c(!1)}catch{h.error("Failed to delete user")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx(P,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0",children:e.jsx(v,{className:"h-4 w-4"})})}),e.jsx(S,{align:"end",className:"w-32",children:e.jsx(M,{className:"text-red-600 focus:text-red-600",onSelect:m=>{m.preventDefault(),c(!0)},children:"Delete"})})]}),e.jsx(E,{open:d,onOpenChange:c,children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Delete user?"}),e.jsx(k,{children:"This action cannot be undone."})]}),e.jsxs(B,{children:[e.jsx(L,{disabled:a,children:"Cancel"}),e.jsx(O,{disabled:a,onClick:x,className:"bg-red-600 hover:bg-red-700 focus:bg-red-700",children:a?"Deleting…":"Delete"})]})]})})]})}function Y({user:s,onDelete:n}){const a=i=>z(new Date(i),"yyyy-MM-dd HH:mm");return e.jsxs(g,{className:"transition-colors hover:bg-muted/50",children:[e.jsx(t,{children:s.username}),e.jsx(t,{children:s.first_name}),e.jsx(t,{children:s.website_login}),e.jsx(t,{children:s.website_password}),e.jsx(t,{className:"text-center",children:s.complete_after_payment?"Yes":"No"}),e.jsx(t,{className:"text-center",children:s.reissue_after_completion?"Yes":"No"}),e.jsx(t,{children:a(s.create_dttm)}),e.jsx(t,{children:a(s.update_dttm)}),e.jsx(t,{className:"text-right",children:e.jsx(W,{userId:s.id,onDeleted:n})})]})}function I({users:s,onDelete:n}){return e.jsx(b,{className:"rounded-2xl border border-muted bg-background shadow-lg",children:e.jsx(D,{className:"overflow-x-auto p-0",children:e.jsxs(C,{className:"min-w-full text-sm",children:[e.jsx(y,{children:e.jsxs(g,{className:"text-xs uppercase tracking-wider text-muted-foreground",children:[e.jsx(r,{className:"w-32",children:"Username"}),e.jsx(r,{className:"w-40",children:"First name"}),e.jsx(r,{className:"w-48",children:"Website login"}),e.jsx(r,{className:"w-48",children:"Website password"}),e.jsx(r,{className:"w-40 text-center",children:"Paid → Complete"}),e.jsx(r,{className:"w-40 text-center",children:"Reissue after completion"}),e.jsx(r,{className:"w-48",children:"Created at"}),e.jsx(r,{className:"w-48",children:"Updated at"}),e.jsx(r,{className:"w-12 text-right"})]})}),e.jsx(T,{children:s.map(a=>e.jsx(Y,{user:a,onDelete:n},a.id))})]})})})}function X(){const[s,n]=l.useState(1),a=50,[i,d]=l.useState([]),[c,x]=l.useState(1),[m,j]=l.useState(!0);l.useEffect(()=>{(async()=>{j(!0);try{const o=await A(s,a);console.log(o),d(o.items),x(o.pages)}catch{h.error("Cannot load users")}finally{j(!1)}})()},[s]);const u=o=>d(p=>p.filter(f=>f.id!==o));return e.jsx("main",{className:"container mx-auto space-y-6 p-6",children:m?e.jsx("p",{className:"text-center",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(I,{users:i,onDelete:u}),e.jsx(U,{current:s,total:c,size:a,onChange:n})]})})}export{X as default};
